<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>سازنده URL انتقال پیامک - SMS.ir</title>
<style>
  @font-face {
    font-family: 'Yekan Bakh';
    src: url('fonts/YekanBakh.woff2') format('woff2'),
         url('fonts/YekanBakh.woff') format('woff');
    font-weight: 400;
    font-style: normal;
  }
  body, input, button {
    font-family: 'Yekan Bakh', 'Yekan Bakh farsi', sans-serif !important;
  }
  :root {
    --dark-navy: #131a29;
    --gold-yellow: #f7bd60;
    --pure-white: #ffffff;
    --error-red: #f95f62;
    --error-bg: #431e22;
  }
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }
  body {
    background-color: var(--dark-navy);
    color: var(--pure-white);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 25px;
    user-select: none;
  }
  .container {
    background: linear-gradient(145deg, #1a2236, #101622);
    border-radius: 24px;
    max-width: 480px;
    width: 100%;
    padding: 36px 42px;
    box-shadow:
      0 10px 30px rgba(247, 189, 96, 0.35),
      inset 0 0 10px rgba(247, 189, 96, 0.15);
    text-align: center;
  }
  h1 {
    font-weight: 900;
    font-size: 2.6rem;
    color: var(--gold-yellow);
    letter-spacing: 3px;
    margin-bottom: 18px;
    text-shadow: 0 0 12px #f7bd60cc;
    user-select: text;
  }
  p.desc {
    font-size: 1.05rem;
    color: #ddd;
    margin-bottom: 28px;
    line-height: 1.5;
    user-select: text;
  }
  label {
    display: block;
    font-weight: 700;
    color: #e1d8b7;
    margin-bottom: 6px;
    font-size: 1rem;
    text-align: right;
    user-select: text;
  }
  input[type="text"] {
    width: 100%;
    background: #212a43;
    border: 2.5px solid var(--gold-yellow);
    border-radius: 14px;
    padding: 14px 18px;
    font-size: 1.1rem;
    color: var(--pure-white);
    transition: border-color 0.4s ease, box-shadow 0.4s ease;
    outline: none;
    user-select: text;
    font-weight: 600;
  }
  input[type="text"]::placeholder {
    color: #c4b776;
    font-weight: 500;
  }
  input[type="text"]:focus {
    border-color: #fff176;
    box-shadow: 0 0 12px 2px #f7bd60bb;
  }

  fieldset {
    margin: 30px 0 36px;
    padding: 20px 28px 28px;
    border-radius: 18px;
    border: 2px solid var(--gold-yellow);
    background: #1b2341;
    text-align: right;
    user-select: none;
  }
  legend {
    font-weight: 900;
    color: var(--gold-yellow);
    font-size: 1.25rem;
    padding: 0 14px;
    user-select: none;
  }

  /* مدرن کردن چک‌باکس */
  label.checkbox-label {
    display: flex;
    align-items: center;
    font-weight: 600;
    font-size: 1rem;
    color: #e9d992;
    margin-bottom: 14px;
    cursor: pointer;
    transition: color 0.3s ease;
    user-select: none;
    gap: 12px;
  }
  label.checkbox-label:hover {
    color: #fff2b8;
  }
  input[type="checkbox"] {
    appearance: none;
    -webkit-appearance: none;
    width: 24px;
    height: 24px;
    border-radius: 8px;
    border: 2.8px solid var(--gold-yellow);
    background-color: transparent;
    cursor: pointer;
    position: relative;
    transition: background-color 0.3s ease, border-color 0.3s ease;
  }
  input[type="checkbox"]:checked {
    background-color: var(--gold-yellow);
    border-color: #dbad31;
  }
  input[type="checkbox"]:checked::after {
    content: '';
    position: absolute;
    top: 5px;
    left: 8px;
    width: 6px;
    height: 12px;
    border: solid var(--dark-navy);
    border-width: 0 3.5px 3.5px 0;
    transform: rotate(45deg);
  }

  button {
    width: 100%;
    background: var(--gold-yellow);
    color: var(--dark-navy);
    font-size: 1.3rem;
    font-weight: 900;
    padding: 18px 0;
    border: none;
    border-radius: 20px;
    cursor: pointer;
    box-shadow:
      0 0 24px 0 #f7bd60cc,
      0 6px 18px -6px #f7bd60cc;
    transition: background 0.4s ease, color 0.4s ease, box-shadow 0.4s ease;
    user-select: none;
  }
  button:hover {
    background: #dbad31;
    box-shadow:
      0 0 38px 4px #f7bd60ee,
      0 10px 30px -10px #dbad31cc;
  }
  button:active {
    background: #b58c21;
    box-shadow: none;
  }

  #result {
    margin-top: 32px;
    background: #212a43;
    border-radius: 18px;
    padding: 18px 26px;
    font-family: 'Courier New', Courier, monospace;
    font-size: 1.1rem;
    color: var(--gold-yellow);
    user-select: all;
    min-height: 56px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: inset 0 0 14px #f7bd60aa;
    cursor: pointer;
    transition: background-color 0.3s ease;
    overflow-wrap: break-word;
  }
  #result:hover {
    background-color: #2a3756;
  }

  /* پیام خطا */
  #errorMsg {
    margin-top: 20px;
    background-color: var(--error-bg);
    color: var(--error-red);
    font-weight: 700;
    padding: 12px 18px;
    border-radius: 14px;
    box-shadow:
      0 0 12px 0 var(--error-red);
    user-select: none;
    text-align: center;
    display: none;
  }

  /* Responsive */
  @media (max-width: 520px) {
    .container {
      padding: 30px 28px 34px;
    }
    h1 {
      font-size: 2rem;
      letter-spacing: 1.8px;
    }
    button {
      font-size: 1.15rem;
      padding: 16px 0;
      border-radius: 18px;
    }
    #result {
      font-size: 1rem;
    }
  }
</style>
</head>
<body>
  <main class="container" role="main" aria-label="سازنده URL انتقال پیامک SMS.ir">
    <h1>لینک‌ساز انتقال پیامک‌های دریافتی در سامانه</h1>
    <p class="desc">لینک انتقال پیامک دریافتی را به دلخواه با انتخاب متغیرها بسازید.</p>

    <label for="baseUrl">آدرس سایت (بدون اسلش آخر):</label>
    <input
      type="text"
      id="baseUrl"
      value="https://SMS.ir"
      aria-describedby="baseUrlHelp"
      placeholder="https://SMS.ir"
      spellcheck="false"
      autocomplete="off"
    />

    <fieldset>
      <legend>انتخاب متغیرها:</legend>
      <label class="checkbox-label" for="varFrom">
        <input type="checkbox" id="varFrom" checked /> from (فرستنده پیامک)
      </label>
      <label class="checkbox-label" for="varTo">
        <input type="checkbox" id="varTo" checked /> to (گیرنده پیامک)
      </label>
      <label class="checkbox-label" for="varText">
        <input type="checkbox" id="varText" checked /> text (متن پیامک)
      </label>
      <label class="checkbox-label" for="varDate">
        <input type="checkbox" id="varDate" checked /> date (تاریخ و زمان)
      </label>
    </fieldset>

    <button id="generateBtn" aria-label="ساخت لینک انتقال پیامک">ساخت لینک</button>

    <div id="errorMsg" role="alert" aria-live="assertive"></div>

    <div id="result" tabindex="0" role="textbox" aria-readonly="true" aria-label="لینک ساخته شده"></div>
  </main>

<script>
  const baseUrlInput = document.getElementById('baseUrl');
  const checkboxes = ['varFrom', 'varTo', 'varText', 'varDate'].map(id => document.getElementById(id));
  const generateBtn = document.getElementById('generateBtn');
  const resultDiv = document.getElementById('result');
  const errorMsg = document.getElementById('errorMsg');

  function encodeParam(param) {
    // Encode params as per URL encoding rules (safe)
    return encodeURIComponent(param);
  }

  generateBtn.addEventListener('click', () => {
    errorMsg.style.display = 'none';
    resultDiv.textContent = '';

    const baseUrl = baseUrlInput.value.trim();
    if (!baseUrl) {
      errorMsg.textContent = 'لطفاً آدرس سایت را وارد کنید.';
      errorMsg.style.display = 'block';
      baseUrlInput.focus();
      return;
    }

    // چک کردن حداقل یک چک‌باکس انتخاب شده باشد
    const selectedVars = checkboxes.filter(chk => chk.checked);
    if (selectedVars.length === 0) {
      errorMsg.textContent = 'حداقل یک متغیر را انتخاب کنید.';
      errorMsg.style.display = 'block';
      return;
    }

    // ساخت لینک
    // پارامترها به شکل ?from={from}&to={to}&text={text}&date={date} قرار میگیرن
    // فقط پارامترهایی که انتخاب شدند به لینک اضافه میشن
    const params = [];
    selectedVars.forEach(chk => {
      let paramName = chk.id.replace('var', '').toLowerCase();
      params.push(`${paramName}={` + paramName + `}`);
    });

    const queryString = params.join('&');
    // بررسی اینکه اگر baseUrl آخرش اسلش داشت، حذف بشه
    let cleanBaseUrl = baseUrl;
    if (cleanBaseUrl.endsWith
